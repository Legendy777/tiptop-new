# ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ - –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ë–î

> –ö–∞–∫ –∑–∞ 2 –º–∏–Ω—É—Ç—ã –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø—É—Å—Ç—É—é –ë–î –∏–≥—Ä–∞–º–∏ –∏ –æ—Ñ—Ñ–µ—Ä–∞–º–∏

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å MongoDB –Ω–∞ PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞—è:
- ‚ùå –ù–µ—Ç –∏–≥—Ä
- ‚ùå –ù–µ—Ç –æ—Ñ—Ñ–µ—Ä–æ–≤  
- ‚ùå –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∏–≥—Ä—É –æ—à–∏–±–∫–∞ "Rejected"

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï (3 —Å–ø–æ—Å–æ–±–∞)

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ API (–°–ê–ú–´–ô –ë–´–°–¢–†–´–ô) ‚ö°

**–®–∞–≥ 1:** –£–∑–Ω–∞–π —Å–≤–æ–π `ADMIN_SECRET`
```bash
# –í Railway Dashboard ‚Üí server ‚Üí Variables
# –ù–∞–π–¥–∏ ADMIN_SECRET
```

**–®–∞–≥ 2:** –û—Ç–ø—Ä–∞–≤—å POST –∑–∞–ø—Ä–æ—Å
```bash
curl -X POST https://tiptop.spb.ru/api/seed/quick \
  -H "X-Admin-Secret: –í–ê–®_ADMIN_SECRET"
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:**
```
https://tiptop.spb.ru/api/seed/quick?secret=–í–ê–®_ADMIN_SECRET
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "ok": true,
  "message": "Database seeded successfully",
  "counts": {
    "games": 8,
    "offers": 28
  }
}
```

‚úÖ **–ì–û–¢–û–í–û!** –û–±–Ω–æ–≤–∏ –±–æ—Ç–∞ - –∏–≥—Ä—ã –ø–æ—è–≤–∏–ª–∏—Å—å!

---

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Railway CLI

**–®–∞–≥ 1:** –£—Å—Ç–∞–Ω–æ–≤–∏ Railway CLI
```bash
npm install -g @railway/cli
railway login
```

**–®–∞–≥ 2:** –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ –ø—Ä–æ–µ–∫—Ç—É
```bash
railway link
```

**–®–∞–≥ 3:** –ó–∞–ø—É—Å—Ç–∏ seed —Å–∫—Ä–∏–ø—Ç
```bash
railway run node server/scripts/seed-games.js
```

---

### –°–ø–æ—Å–æ–± 3: –õ–æ–∫–∞–ª—å–Ω–æ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ë–î)

**–®–∞–≥ 1:** –°–∫–æ–ø–∏—Ä—É–π DATABASE_URL –∏–∑ Railway
```bash
# Railway Dashboard ‚Üí server ‚Üí Variables ‚Üí DATABASE_URL
```

**–®–∞–≥ 2:** –°–æ–∑–¥–∞–π .env —Ñ–∞–π–ª
```bash
cd server
echo "DATABASE_URL=—Ç–≤–æ–π_database_url" > .env
```

**–®–∞–≥ 3:** –ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç
```bash
node scripts/seed-games.js
```

---

## üìä –ß–¢–û –ë–£–î–ï–¢ –î–û–ë–ê–í–õ–ï–ù–û

### 8 –ò–≥—Ä:
1. üì≤ Asphalt Legends (3 –æ—Ñ—Ñ–µ—Ä–∞)
2. üì≤ EA SPORTS FC Mobile (3 –æ—Ñ—Ñ–µ—Ä–∞)
3. üì≤ PUBG Mobile (4 –æ—Ñ—Ñ–µ—Ä–∞)
4. üì≤ Clash of Clans (3 –æ—Ñ—Ñ–µ—Ä–∞)
5. üì≤ Brawl Stars (3 –æ—Ñ—Ñ–µ—Ä–∞)
6. üì≤ Genshin Impact (4 –æ—Ñ—Ñ–µ—Ä–∞)
7. üì≤ Roblox (4 –æ—Ñ—Ñ–µ—Ä–∞)
8. üì≤ Minecraft (3 –æ—Ñ—Ñ–µ—Ä–∞)

**–ò—Ç–æ–≥–æ:** 8 –∏–≥—Ä + 28 –æ—Ñ—Ñ–µ—Ä–æ–≤

---

## üîç –ü–†–û–í–ï–†–ö–ê

### 1. –ü—Ä–æ–≤–µ—Ä—å —á–µ—Ä–µ–∑ API
```bash
curl https://tiptop.spb.ru/api/games
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Å–ø–∏—Å–æ–∫ –∏–∑ 8 –∏–≥—Ä.

### 2. –ü—Ä–æ–≤–µ—Ä—å –≤ –±–æ—Ç–µ
1. –û—Ç–∫—Ä–æ–π –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏ "–ú–∞–≥–∞–∑–∏–Ω"
3. –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∏–≥—Ä—ã

### 3. –ü—Ä–æ–≤–µ—Ä—å –æ—Ñ—Ñ–µ—Ä—ã
```bash
curl https://tiptop.spb.ru/api/offers
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 28 –æ—Ñ—Ñ–µ—Ä–æ–≤.

---

## üö® –ï–°–õ–ò –ù–ï –†–ê–ë–û–¢–ê–ï–¢

### –û—à–∏–±–∫–∞: "Forbidden"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ADMIN_SECRET
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å —Å–µ–∫—Ä–µ—Ç –≤ Railway Variables

### –û—à–∏–±–∫–∞: "telegramId does not exist"
**–ü—Ä–∏—á–∏–Ω–∞:** –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∞—Å—å
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–æ–∂–¥–∏ –¥–µ–ø–ª–æ–π (2-3 –º–∏–Ω—É—Ç—ã), —Å–∫—Ä–∏–ø—Ç `fix-database.js` –∏—Å–ø—Ä–∞–≤–∏—Ç

### –û—à–∏–±–∫–∞: "Game already exists"
**–ü—Ä–∏—á–∏–Ω–∞:** –ò–≥—Ä—ã —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã
**–†–µ—à–µ–Ω–∏–µ:** –í—Å—ë –æ–∫! –ü—Ä–æ–≤–µ—Ä—å –±–æ—Ç–∞

### –ò–≥—Ä—ã –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –±–æ—Ç–µ
**–ü—Ä–∏—á–∏–Ω–∞:** –ö–µ—à –∏–ª–∏ —Å—Ç–∞—Ä—ã–π –¥–æ–º–µ–Ω
**–†–µ—à–µ–Ω–∏–µ:** 
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞ (Railway ‚Üí bot ‚Üí Restart)
2. –ü—Ä–æ–≤–µ—Ä—å `WEB_APP_URL` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. –û—á–∏—Å—Ç–∏ –∫–µ—à Telegram (Settings ‚Üí Data and Storage ‚Üí Clear Cache)

---

## üìù –î–ê–õ–¨–®–ï

–ü–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ë–î:

### 1. –û–±–Ω–æ–≤–∏ –¥–æ–º–µ–Ω –≤ –±–æ—Ç–µ
```bash
# Railway ‚Üí bot ‚Üí Variables
WEB_APP_URL=https://tiptop.spb.ru
```

### 2. –ü—Ä–æ–≤–µ—Ä—å CORS
```bash
# Railway ‚Üí server ‚Üí Variables
CLIENT_URL=https://tiptop.spb.ru
```

### 3. –î–æ–±–∞–≤—å –±–æ–ª—å—à–µ –∏–≥—Ä —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
```
https://tiptop.spb.ru/admin
```

---

## üéâ –ì–û–¢–û–í–û!

–¢–µ–ø–µ—Ä—å:
- ‚úÖ –ë–î –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –∏–≥—Ä–∞–º–∏
- ‚úÖ –û—Ñ—Ñ–µ—Ä—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã
- ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑—ã

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–º–æ—Ç—Ä–∏ `–ü–õ–ê–ù_–î–û–†–ê–ë–û–¢–û–ö.md` –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π.
